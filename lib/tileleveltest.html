<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Index</title>
		<meta charset="utf-8">
		<script src="tilelevelinit.js"></script>
		<script src="tilelevelinput.js"></script>
		<script src="tilelevellazy.js"></script>
		<script src="tilelevellayout.js"></script>
		<script src="tilelevelspot.js"></script>
		<script src="tilelevelrender.js"></script>
		<style>
			
		</style>
	</head>
	<body>
		<h1>Test</h1>
		<svg id="contentSVG" width="800" height="400">
			<circle cx="1000" cy="1000" r="1000" stroke="black" stroke-width="3" fill="red" />
			<circle cx="400" cy="200" r="350" stroke="black" stroke-width="3" fill="green" />
			<circle cx="400" cy="200" r="200" stroke="black" stroke-width="3" fill="blue" />
			<circle cx="400" cy="200" r="20" stroke="black" stroke-width="3" fill="silver" />
			<g id='cntnt'></g>
		</svg>
		<p>Another</p>
		<svg id="SVG2" width="90%" height="300px">
			<circle cx="0" cy="0" r="340" stroke="black" stroke-width="3" fill="green" />
			<circle cx="2000" cy="0" r="490" stroke="black" stroke-width="3" fill="blue" />
			<circle cx="2000" cy="2000" r="140" stroke="black" stroke-width="3" fill="red" />
			<circle cx="0" cy="2000" r="240" stroke="black" stroke-width="3" fill="brown" />
			<circle cx="500" cy="500" r="70" stroke="black" stroke-width="3" fill="silver" />
			<g id='anothr'></g>
		</svg>
		<script>
			console.log('start');
			var a1=new TileLevel("contentSVG",'cntnt');
			var scnd=new TileLevel("SVG2",'anothr');
			
			a1.resetInnerSize(4000,3000);
			scnd.resetInnerSize(2000,2000);
			
			var bg=a1.addLayer();
			var mdl=a1.addLayer();
			var fg=a1.addLayer();
			a1.addZoomLevel(5,function(left, top, width, height){
				console.log('render',5);
				var x = a1.tapSize * 7;
				var y = a1.tapSize * 3;
				var w = a1.tapSize * 40;
				var h = a1.tapSize * 10;
				var g = a1.rakeGroup(x, y, w, h, 'tstre', bg, left, top, width, height);
				if (g) {
					a1.tileRectangle(g, x, y, w, h, '#f96');
				}
			});
			a1.addZoomLevel(50,function(left, top, width, height){
				console.log('render',50);
				var x = a1.tapSize * 7;
				var y = a1.tapSize * 3;
				var w = a1.tapSize * 40;
				var h = a1.tapSize * 10;
				var g = a1.rakeGroup(x, y, w, h, 'tstre', bg, left, top, width, height);
				if (g) {
					a1.tileRectangle(g, x, y, w, h, '#ff6');
					a1.addSpot('b50', x, y, w, h, function () {
						console.log('spot b50');
						a1.startSlideTo(x,y,13);
					},false,false);
				}
			});
			a1.addZoomLevel(12,function(left, top, width, height){
				console.log('render',12);
				var x = a1.tapSize * 7;
				var y = a1.tapSize * 3;
				var w = a1.tapSize * 40;
				var h = a1.tapSize * 10;
				var g = a1.rakeGroup(x, y, w, h, 'tstre', bg, left, top, width, height);
				if (g) {
					a1.tileRectangle(g, x, y, w, h, '#f9f');
					
				}
				
			});
			//console.log(a1.renderers);
			var sng = scnd.addLayer();
			var loVer = scnd.addLayer(true);
			var loHor = scnd.addLayer(false, true);
			var loBoth = scnd.addLayer(true, true);
			scnd.addZoomLevel(14, function (left, top, width, height) {
				console.log('render2-14', left, top, width, height,scnd.innerWidth);
				var g = scnd.rakeGroup(0, 0, scnd.innerWidth, scnd.innerHeight, 'bg2r', sng, left, top, width, height);
				if (g) {
					scnd.tileRectangle(g, 0, 0, scnd.innerWidth, scnd.innerHeight, '#222');
				}
				var x = scnd.tapSize * 7;
				var y = scnd.tapSize * 3;
				var w = scnd.tapSize * 5;
				var h = scnd.tapSize * 9;
				g = scnd.rakeGroup(x, y, w, h, 't2s', sng, left, top, width, height);
				if (g) {
					scnd.tileRectangle(g, x, y, w, h, '#096');
				}
				scnd.addSpot('plybt', x, y, w, h, function () {
					console.log('spot click');
				},false,false,1.4);
				g = scnd.rakeGroup(scnd.tapSize * 2, scnd.tapSize * 1, scnd.tapSize * 2, scnd.tapSize * 1, 'verlo', loVer, left, top, width, height);
				if (g) {
					scnd.tileRectangle(g, scnd.tapSize * 2, scnd.tapSize * 1, scnd.tapSize * 2, scnd.tapSize * 1, '#f00');
				}
				g = scnd.rakeGroup(scnd.tapSize * 5, scnd.tapSize * 2, scnd.tapSize * 1, scnd.tapSize * 2, 'horlo', loHor, left, top, width, height);
				if (g) {
					scnd.tileRectangle(g, scnd.tapSize * 5, scnd.tapSize * 2, scnd.tapSize * 1, scnd.tapSize * 2, '#00f');
				}
				g = scnd.rakeGroup(scnd.tapSize * 3, scnd.tapSize * 5, scnd.tapSize * 2, scnd.tapSize * 2, 'bolo', loBoth, left, top, width, height);
				//console.log(g,a1);
				if (g) {
					scnd.tileRectangle(g, scnd.tapSize * 3, scnd.tapSize * 5, scnd.tapSize * 2, scnd.tapSize * 2, '#999');
				}
				scnd.addSpot('svlo', scnd.tapSize * 2, scnd.tapSize * 1, scnd.tapSize * 2, scnd.tapSize * 1, function () {
					console.log('svlo click');
				},true);
				scnd.addSpot('shlo',scnd.tapSize * 5, scnd.tapSize * 2, scnd.tapSize * 1, scnd.tapSize * 2, function () {
					console.log('shlo click');
				},false,true);
				scnd.addSpot('blo',scnd.tapSize * 3, scnd.tapSize * 5, scnd.tapSize * 2, scnd.tapSize * 2, function () {
					console.log('blo click');
				},true,true,10);
				window.onresize = function () {
					scnd.resetSize(); 
				};
			});
			console.log('done');
		</script>
	</body>
</html>
